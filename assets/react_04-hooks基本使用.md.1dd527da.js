import{_ as s,c as n,o as a,a as l}from"./app.6f9c0979.js";const A=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"Hooksæ˜¯ä»€ä¹ˆï¼Ÿ","slug":"hooksæ˜¯ä»€ä¹ˆ","link":"#hooksæ˜¯ä»€ä¹ˆ","children":[]},{"level":2,"title":"useState Hook","slug":"usestate-hook","link":"#usestate-hook","children":[{"level":3,"title":"useState Hook çš„åŸºæœ¬ä½¿ç”¨","slug":"usestate-hook-çš„åŸºæœ¬ä½¿ç”¨","link":"#usestate-hook-çš„åŸºæœ¬ä½¿ç”¨","children":[]},{"level":3,"title":"ä½¿ç”¨useStateç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹","slug":"ä½¿ç”¨usestateç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹","link":"#ä½¿ç”¨usestateç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹","children":[]},{"level":3,"title":"ä¸ºå‡½æ•°ç»„ä»¶æ·»åŠ å¤šä¸ªçŠ¶æ€","slug":"ä¸ºå‡½æ•°ç»„ä»¶æ·»åŠ å¤šä¸ªçŠ¶æ€","link":"#ä¸ºå‡½æ•°ç»„ä»¶æ·»åŠ å¤šä¸ªçŠ¶æ€","children":[]},{"level":3,"title":"hooks çš„ä½¿ç”¨è§„åˆ™","slug":"hooks-çš„ä½¿ç”¨è§„åˆ™","link":"#hooks-çš„ä½¿ç”¨è§„åˆ™","children":[]}]},{"level":2,"title":"useEffect Hook","slug":"useeffect-hook","link":"#useeffect-hook","children":[{"level":3,"title":"useEffect çš„åŸºæœ¬ä½¿ç”¨","slug":"useeffect-çš„åŸºæœ¬ä½¿ç”¨","link":"#useeffect-çš„åŸºæœ¬ä½¿ç”¨","children":[]},{"level":3,"title":"useEffect çš„ä¾èµ–-ç©ºæ•°ç»„","slug":"useeffect-çš„ä¾èµ–-ç©ºæ•°ç»„","link":"#useeffect-çš„ä¾èµ–-ç©ºæ•°ç»„","children":[]},{"level":3,"title":"useEffectçš„ä¾èµ–-ä¾èµ–é¡¹","slug":"useeffectçš„ä¾èµ–-ä¾èµ–é¡¹","link":"#useeffectçš„ä¾èµ–-ä¾èµ–é¡¹","children":[]},{"level":3,"title":"useEffectå¯ä»¥ç›‘å¬å¤šä¸ªçŠ¶æ€","slug":"useeffectå¯ä»¥ç›‘å¬å¤šä¸ªçŠ¶æ€","link":"#useeffectå¯ä»¥ç›‘å¬å¤šä¸ªçŠ¶æ€","children":[]},{"level":3,"title":"useEffect ç»„ä»¶å¸è½½æ—¶","slug":"useeffect-ç»„ä»¶å¸è½½æ—¶","link":"#useeffect-ç»„ä»¶å¸è½½æ—¶","children":[]},{"level":3,"title":"useEffect æŒ‚è½½å’Œå¸è½½æ¸…ç†ç»¼åˆå†™æ³•","slug":"useeffect-æŒ‚è½½å’Œå¸è½½æ¸…ç†ç»¼åˆå†™æ³•","link":"#useeffect-æŒ‚è½½å’Œå¸è½½æ¸…ç†ç»¼åˆå†™æ³•","children":[]},{"level":3,"title":"useEffect  å‘é€è¯·æ±‚","slug":"useeffect-å‘é€è¯·æ±‚","link":"#useeffect-å‘é€è¯·æ±‚","children":[]}]},{"level":2,"title":"useRef","slug":"useref","link":"#useref","children":[]},{"level":2,"title":"useRef-ä¿æŒå¼•ç”¨ä¸å˜","slug":"useref-ä¿æŒå¼•ç”¨ä¸å˜","link":"#useref-ä¿æŒå¼•ç”¨ä¸å˜","children":[]}],"relativePath":"react/04-hooksåŸºæœ¬ä½¿ç”¨.md","lastUpdated":1677170896000}'),p={name:"react/04-hooksåŸºæœ¬ä½¿ç”¨.md"},o=l(`<h2 id="hooksæ˜¯ä»€ä¹ˆ" tabindex="-1">Hooksæ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#hooksæ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a></h2><p><strong>ç›®æ ‡</strong>ï¼šèƒ½å¤Ÿè¯´å‡º React Hooksæ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>å†…å®¹</strong>ï¼š</p><ul><li><code>Hooks</code>ï¼šé’©å­ã€é’“é’©ã€é’©ä½</li><li><code>Hooks</code> æ˜¯ <strong>React v16.8</strong> ä¸­çš„æ–°å¢åŠŸèƒ½</li><li>ä½œç”¨ï¼šä¸º<strong>å‡½æ•°ç»„ä»¶</strong>æä¾›çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸç­‰åŸæœ¬ class ç»„ä»¶ä¸­æä¾›çš„ React åŠŸèƒ½ <ul><li>å¯ä»¥ç†è§£ä¸ºé€šè¿‡ Hooks ä¸ºå‡½æ•°ç»„ä»¶é’©å…¥ class ç»„ä»¶çš„ç‰¹æ€§</li></ul></li><li>æ³¨æ„ï¼š<span style="color:red;"><strong>Hooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨</strong></span>ï¼Œè‡ªæ­¤ï¼Œå‡½æ•°ç»„ä»¶æˆä¸º React çš„æ–°å® å„¿</li></ul><p>React v16.8 ç‰ˆæœ¬å‰åï¼Œç»„ä»¶å¼€å‘æ¨¡å¼çš„å¯¹æ¯”ï¼š</p><ul><li>React v16.8 ä»¥å‰ï¼š class ç»„ä»¶(æä¾›çŠ¶æ€) + å‡½æ•°ç»„ä»¶(å±•ç¤ºå†…å®¹)</li><li>React v16.8 åŠå…¶ä»¥åï¼š <ol><li>class ç»„ä»¶(æä¾›çŠ¶æ€) + å‡½æ•°ç»„ä»¶(å±•ç¤ºå†…å®¹)</li><li>Hooks(æä¾›çŠ¶æ€) + å‡½æ•°ç»„ä»¶(å±•ç¤ºå†…å®¹)</li><li>æ··ç”¨ä»¥ä¸Šä¸¤ç§æ–¹å¼ï¼šéƒ¨åˆ†åŠŸèƒ½ç”¨ class ç»„ä»¶ï¼Œéƒ¨åˆ†åŠŸèƒ½ç”¨ Hooks+å‡½æ•°ç»„ä»¶</li></ol></li></ul><p><strong>æ€»ç»“</strong>ï¼š</p><p>æ³¨æ„1ï¼šè™½ç„¶æœ‰äº† Hooksï¼Œä½† <em>React å®˜æ–¹å¹¶æ²¡æœ‰è®¡åˆ’ä» React åº“ä¸­ç§»é™¤ class</em></p><p>æ³¨æ„2ï¼šæœ‰äº† Hooks ä»¥åï¼Œä¸èƒ½å†æŠŠ<strong>å‡½æ•°ç»„ä»¶</strong>ç§°ä¸º<s>æ— çŠ¶æ€ç»„ä»¶</s>äº†ï¼Œå› ä¸º Hooks ä¸ºå‡½æ•°ç»„ä»¶æä¾›äº†çŠ¶æ€</p><h2 id="usestate-hook" tabindex="-1">useState Hook <a class="header-anchor" href="#usestate-hook" aria-hidden="true">#</a></h2><h3 id="usestate-hook-çš„åŸºæœ¬ä½¿ç”¨" tabindex="-1">useState Hook çš„åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#usestate-hook-çš„åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a></h3><ul><li>ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ æƒ³è¦åœ¨<strong>å‡½æ•°ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ç»„ä»¶çŠ¶æ€æ—¶</strong>ï¼Œå°±è¦ä½¿ç”¨ <strong>useState</strong> Hook äº†</li><li>ä½œç”¨ï¼šä¸ºå‡½æ•°ç»„ä»¶æä¾›çŠ¶æ€ï¼ˆstateï¼‰</li><li>ä½¿ç”¨æ­¥éª¤ï¼š <ol><li>å¯¼å…¥ <code>useState</code> å‡½æ•°</li><li>è°ƒç”¨ <code>useState</code> å‡½æ•°ï¼Œå¹¶ä¼ å…¥çŠ¶æ€çš„åˆå§‹å€¼</li><li>ä» <code>useState</code> å‡½æ•°çš„è¿”å›å€¼ä¸­ï¼Œæ‹¿åˆ°çŠ¶æ€å’Œä¿®æ”¹çŠ¶æ€çš„å‡½æ•°</li><li>åœ¨ JSX ä¸­å±•ç¤ºçŠ¶æ€</li><li>åœ¨æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ä¸­è°ƒç”¨ä¿®æ”¹çŠ¶æ€çš„å‡½æ•°ï¼Œæ¥æ›´æ–°çŠ¶æ€</li></ol></li></ul><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useState</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> Count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">setCount</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">/* å±•ç¤ºçŠ¶æ€å€¼ */</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">useState Hook -&gt; </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">/* ç‚¹å‡»æŒ‰é’®ï¼Œè®©çŠ¶æ€å€¼ +1 */</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setCount</span><span style="color:#A6ACCD;">(count </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">+1</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//class å†™æ³•</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Count</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">state</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">handleChangeCount</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#F07178;">setState(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      count</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">handleChangeCount</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">ç‚¹å‡»æ”¹å˜count</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">    )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><ul><li>å‚æ•°ï¼š<strong>çŠ¶æ€åˆå§‹å€¼</strong>ã€‚æ¯”å¦‚ï¼Œä¼ å…¥ 0 è¡¨ç¤ºè¯¥çŠ¶æ€çš„åˆå§‹å€¼ä¸º 0 <ul><li>æ³¨æ„ï¼šæ­¤å¤„çš„çŠ¶æ€å¯ä»¥æ˜¯ä»»æ„å€¼ï¼ˆæ¯”å¦‚ï¼Œæ•°å€¼ã€å­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œè€Œ class ç»„ä»¶ä¸­çš„ state å¿…é¡»æ˜¯å¯¹è±¡</li></ul></li><li>è¿”å›å€¼ï¼šæ•°ç»„ï¼ŒåŒ…å«ä¸¤ä¸ªå€¼ï¼š1 çŠ¶æ€å€¼ï¼ˆstateï¼‰ 2 ä¿®æ”¹è¯¥çŠ¶æ€çš„å‡½æ•°ï¼ˆsetStateï¼‰</li></ul><h3 id="ä½¿ç”¨usestateç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹" tabindex="-1">ä½¿ç”¨useStateç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹ <a class="header-anchor" href="#ä½¿ç”¨usestateç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹" aria-hidden="true">#</a></h3><p>å‡½æ•°ç»„ä»¶ä½¿ç”¨ <strong>useState</strong> hook åçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä»¥åŠçŠ¶æ€å€¼çš„å˜åŒ–ï¼š</p><ul><li><p>ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼š</p><ol><li>ä»å¤´å¼€å§‹æ‰§è¡Œè¯¥ç»„ä»¶ä¸­çš„ä»£ç é€»è¾‘</li><li>è°ƒç”¨ <code>useState(0)</code> å°†ä¼ å…¥çš„å‚æ•°ä½œä¸ºçŠ¶æ€åˆå§‹å€¼ï¼Œå³ï¼š0</li><li>æ¸²æŸ“ç»„ä»¶ï¼Œæ­¤æ—¶ï¼Œè·å–åˆ°çš„çŠ¶æ€ count å€¼ä¸ºï¼š 0</li></ol></li><li><p>ç»„ä»¶ç¬¬äºŒæ¬¡æ¸²æŸ“ï¼š</p><ol><li>ç‚¹å‡»æŒ‰é’®ï¼Œè°ƒç”¨ <code>setCount(count + 1)</code> ä¿®æ”¹çŠ¶æ€ï¼Œå› ä¸ºçŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ï¼Œè¯¥ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“</li><li>ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œä¼šå†æ¬¡æ‰§è¡Œè¯¥ç»„ä»¶ä¸­çš„ä»£ç é€»è¾‘</li><li>å†æ¬¡è°ƒç”¨ <code>useState(0)</code>ï¼Œæ­¤æ—¶ <strong>React å†…éƒ¨ä¼šæ‹¿åˆ°æœ€æ–°çš„çŠ¶æ€å€¼è€Œéåˆå§‹å€¼</strong>ï¼Œæ¯”å¦‚ï¼Œè¯¥æ¡ˆä¾‹ä¸­æœ€æ–°çš„çŠ¶æ€å€¼ä¸º 1</li><li>å†æ¬¡æ¸²æŸ“ç»„ä»¶ï¼Œæ­¤æ—¶ï¼Œè·å–åˆ°çš„çŠ¶æ€ count å€¼ä¸ºï¼š1</li></ol></li></ul><p>æ³¨æ„ï¼š<strong>useState çš„åˆå§‹å€¼(å‚æ•°)åªä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ç”Ÿæ•ˆ</strong>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥åçš„æ¯æ¬¡æ¸²æŸ“ï¼ŒuseState è·å–åˆ°éƒ½æ˜¯æœ€æ–°çš„çŠ¶æ€å€¼ã€‚React ç»„ä»¶ä¼šè®°ä½æ¯æ¬¡æœ€æ–°çš„çŠ¶æ€å€¼!</p><h3 id="ä¸ºå‡½æ•°ç»„ä»¶æ·»åŠ å¤šä¸ªçŠ¶æ€" tabindex="-1">ä¸ºå‡½æ•°ç»„ä»¶æ·»åŠ å¤šä¸ªçŠ¶æ€ <a class="header-anchor" href="#ä¸ºå‡½æ•°ç»„ä»¶æ·»åŠ å¤šä¸ªçŠ¶æ€" aria-hidden="true">#</a></h3><p>é—®é¢˜ï¼šå¦‚æœä¸€ä¸ªå‡½æ•°ç»„ä»¶éœ€è¦å¤šä¸ªçŠ¶æ€ï¼Œè¯¥å¦‚ä½•å¤„ç†? å›ç­”ï¼šè°ƒç”¨ <code>useState</code> Hook å¤šæ¬¡å³å¯ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡ useState Hook å¯ä»¥æä¾›ä¸€ä¸ªçŠ¶æ€ã€‚ æ³¨æ„ï¼šuseState Hook å¤šæ¬¡è°ƒç”¨è¿”å›çš„ [state, setState] ç›¸äº’ä¹‹é—´ï¼Œäº’ä¸å½±å“ã€‚</p><ul><li>ä½¿ç”¨æ•°ç»„è§£æ„ç®€åŒ– <code>useState</code> çš„ä½¿ç”¨ <ul><li>çº¦å®šï¼š<strong>ä¿®æ”¹çŠ¶æ€çš„å‡½æ•°åç§°ä»¥ set å¼€å¤´ï¼Œåé¢è·Ÿä¸ŠçŠ¶æ€çš„åç§°</strong></li></ul></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// è§£æ„å‡ºæ¥çš„åç§°å¯ä»¥æ˜¯ä»»æ„åç§°</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> setState</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">age</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> setAge</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> setCount</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="hooks-çš„ä½¿ç”¨è§„åˆ™" tabindex="-1">hooks çš„ä½¿ç”¨è§„åˆ™ <a class="header-anchor" href="#hooks-çš„ä½¿ç”¨è§„åˆ™" aria-hidden="true">#</a></h3><p>æ³¨æ„ï¼š<strong>React Hooks åªèƒ½ç›´æ¥å‡ºç°åœ¨ å‡½æ•°ç»„ä»¶ ä¸­ï¼Œä¸èƒ½åµŒå¥—åœ¨ if/for/å…¶ä»–æ™®é€šå‡½æ•°ä¸­</strong>ï¼</p><p>å¦åˆ™å°±ä¼šæŠ¥é”™ï¼šReact Hook &quot;useState&quot; is called conditionally. React Hooks must be called in the exact same order in every component render</p><p>React çš„ useState è¿™ä¸ª Hook è¢«æ¡ä»¶æ€§ï¼ˆæ”¾åœ¨ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ä¸­ï¼‰çš„è°ƒç”¨äº†ã€‚</p><p>React Hooks å¿…é¡»è¦æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼ŒæŒ‰ç…§<strong>ç›¸åŒçš„é¡ºåº</strong>æ¥è°ƒç”¨æ‰€æœ‰çš„ Hooksã€‚</p><ul><li>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„è§„åˆ™ï¼Ÿ å› ä¸º React æ˜¯æŒ‰ç…§ Hooks çš„è°ƒç”¨é¡ºåºæ¥è¯†åˆ«æ¯ä¸€ä¸ª Hookï¼Œå¦‚æœæ¯æ¬¡è°ƒç”¨çš„é¡ºåºä¸åŒï¼Œå¯¼è‡´ React æ— æ³•çŸ¥é“æ˜¯å“ªä¸€ä¸ª Hook</li></ul><p>ä¸‰ä¸ªé™åˆ¶æ€»ç»“ï¼š</p><ol><li>ä¸èƒ½åœ¨if elseè¯­å¥ä¸­ä½¿ç”¨hooks</li><li>ä¸èƒ½åœ¨forè¯­å¥ä¸­ä½¿ç”¨hooks</li><li>ä¸èƒ½åœ¨æ™®é€šå‡½æ•°ä¸­ä½¿ç”¨hooks</li></ol><p>ä»€ä¹ˆæ˜¯Reactä¸­çš„ç‰¹æ®Šå‡½æ•°ï¼š</p><ol><li>å‡½æ•°å¼ç»„ä»¶</li><li>useXxxå‘½åçš„è‡ªå®šä¹‰hookså‡½æ•°</li></ol><h2 id="useeffect-hook" tabindex="-1">useEffect Hook <a class="header-anchor" href="#useeffect-hook" aria-hidden="true">#</a></h2><ol><li>useEffect çš„åŸºæœ¬ä½¿ç”¨</li><li>useEffect çš„ä¾èµ–</li><li>useEffect å‘é€è¯·æ±‚</li></ol><h3 id="useeffect-çš„åŸºæœ¬ä½¿ç”¨" tabindex="-1">useEffect çš„åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#useeffect-çš„åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a></h3><blockquote><p>ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ æƒ³è¦åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå¤„ç†å‰¯ä½œç”¨ï¼ˆside effectï¼‰æ—¶ï¼Œå°±è¦ä½¿ç”¨ useEffect Hook äº†</p></blockquote><p><strong>ç†è§£ï¼šå¯ä»¥ç»™å‡½æ•°å¼ç»„ä»¶ï¼Œæä¾›ç”Ÿå‘½å‘¨æœŸ</strong></p><p><code>useEffect</code> Hook çœ‹åš <code>componentDidMount</code>ï¼Œ<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useEffect</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">effect</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">title</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">å½“å‰å·²ç‚¹å‡» </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> æ¬¡</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">title</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">å½“å‰å·²ç‚¹å‡» </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> æ¬¡</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="useeffect-çš„ä¾èµ–-ç©ºæ•°ç»„" tabindex="-1">useEffect çš„ä¾èµ–-ç©ºæ•°ç»„ <a class="header-anchor" href="#useeffect-çš„ä¾èµ–-ç©ºæ•°ç»„" aria-hidden="true">#</a></h3><blockquote><p>useEffect çš„ä¾èµ–æ˜¯ä¸€ä¸ªç©ºæ•°ç»„</p></blockquote><p>useEffect çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ª<strong>ç©ºæ•°ç»„ï¼ˆ[]ï¼‰</strong>ï¼Œè¡¨ç¤ºåªåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åæ‰§è¡Œ effect</p><p>**ä½œç”¨ï¼š**ç»„ä»¶æŒ‚è½½åï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ</p><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><ol><li>å‘é€è¯·æ±‚è·å–æ•°æ®</li><li>è·å–domå…ƒç´ </li><li>ç»‘å®šäº‹ä»¶</li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleResize</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">resize</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleResize</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è§£é‡Šï¼š</p><ul><li>è¯¥ effect åªä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åæ‰§è¡Œï¼Œå› æ­¤ï¼Œå¯ä»¥æ‰§è¡Œåƒäº‹ä»¶ç»‘å®šç­‰åªéœ€è¦æ‰§è¡Œä¸€æ¬¡çš„æ“ä½œ</li><li>è·Ÿ useState Hook ä¸€æ ·ï¼Œä¸€ä¸ªç»„ä»¶ä¸­ä¹Ÿå¯ä»¥è°ƒç”¨ useEffect Hook å¤šæ¬¡</li></ul><p>å°ç»“ï¼š</p><ul><li>useEffect(() =&gt; {}, []) ä»£è¡¨ç»„ä»¶æŒ‚è½½å</li><li>åœºæ™¯ï¼š <ol><li>ğŸ’¥ğŸ’¥ å‘è¯·æ±‚</li><li>æœ€å…ˆè·å–dom</li><li>ç»‘å®šäº‹ä»¶ç­‰</li></ol></li></ul><h3 id="useeffectçš„ä¾èµ–-ä¾èµ–é¡¹" tabindex="-1">useEffectçš„ä¾èµ–-ä¾èµ–é¡¹ <a class="header-anchor" href="#useeffectçš„ä¾èµ–-ä¾èµ–é¡¹" aria-hidden="true">#</a></h3><blockquote><p>ä½œç”¨ï¼šæŒ‚è½½åæ‰§è¡Œï¼Œç›‘å¬æ•°æ®å˜åŒ–ï¼Œå›è°ƒè‡ªåŠ¨æ‰§è¡Œ</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è§¦å‘æ—¶æœºï¼š1 æŒ‚è½½æ—¶ä¼šæ‰§è¡Œ 2 å½“ count å˜åŒ–æ—¶ä¼šå†æ¬¡æ‰§è¡Œ ğŸ˜Š ç­‰åŒäºåœ¨componentDidMount å’Œ componentDidUpdateä¸¤ä¸ªé’©å­å‡½æ•°ä¸­è°ƒç”¨</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç±»ä¼¼vueä¸­ä¾¦å¬å™¨ï¼Œå¯ä»¥ç›‘æµ‹æ•°æ®çš„å˜åŒ–ã€‚</span></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [count])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è§£é‡Šï¼š</p><ul><li>è¯¥ effect ä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åæ‰§è¡Œ</li><li>è¯¥ effect ä¼šåœ¨countæ¯æ¬¡å˜åŒ–åï¼Œè‡ªåŠ¨æ‰§è¡Œ</li></ul><p>å°ç»“ï¼š</p><ol><li>ç±»ä¼¼ï¼šwatchå¼€å¯äº†ç«‹å³æ‰§è¡Œ</li><li>ä½œç”¨ï¼šæŒ‚è½½åå’Œæ›´æ–°åï¼ŒäºŒåˆä¸€</li></ol><br><h3 id="useeffectå¯ä»¥ç›‘å¬å¤šä¸ªçŠ¶æ€" tabindex="-1">useEffectå¯ä»¥ç›‘å¬å¤šä¸ªçŠ¶æ€ <a class="header-anchor" href="#useeffectå¯ä»¥ç›‘å¬å¤šä¸ªçŠ¶æ€" aria-hidden="true">#</a></h3><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;font-style:italic;">// 1ã€ç¬¬ä¸€ç§å†™æ³•ï¼šåˆ†å¼€ç›‘å¬</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ¯æ¬¡æ‹¿åˆ°æœ€æ–°çš„count</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [count])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ¯æ¬¡æ‹¿åˆ°æœ€æ–°çš„count2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">count2</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [count2])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 2. ç¬¬äºŒç§å†™æ³•ï¼šæ•°ç»„å†…å†™å¤šä¸ªå˜é‡</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ¯æ¬¡æ‹¿åˆ°æœ€æ–°çš„count å’Œ count2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">count2</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [count</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> count2])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="useeffect-ç»„ä»¶å¸è½½æ—¶" tabindex="-1">useEffect ç»„ä»¶å¸è½½æ—¶ <a class="header-anchor" href="#useeffect-ç»„ä»¶å¸è½½æ—¶" aria-hidden="true">#</a></h3><p>é—®é¢˜ï¼šå¦‚ä½•åœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œè§£ç»‘äº‹ä»¶ï¼Ÿæ­¤æ—¶ï¼Œå°±ç”¨åˆ° effect çš„è¿”å›å€¼äº†</p><p>é™æ€ç»“æ„ï¼šå¤åˆ¶å³å¯</p><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> React</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">useState</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">App</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å‡†å¤‡ç»„ä»¶çš„æ˜¾ç¤ºä¸éšè—</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">isShow</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">setIsShow</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">isShow </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Child</span><span style="color:#89DDFF;"> /&gt;}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setIsShow</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">isShow)</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">ç‚¹å‡»å¸è½½å­ç»„ä»¶</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Child</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// åœ¨å­ç»„ä»¶ä¸­æŒ‚è½½æ—¶ç›‘å¬çª—å£æ”¹å˜äº‹ä»¶</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">æˆ‘æ˜¯å­ç»„ä»¶</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>æ­£ç¡®ä»£ç ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> handleResize </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">resize</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleResize</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;">[])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">// ç»„ä»¶å¸è½½æ—¶ï¼Œreturnçš„å›è°ƒå‡½æ•°ä¼šè‡ªåŠ¨æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">resize</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleResize</span><span style="color:#F07178;">)  </span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è§£é‡Šï¼š</p><ul><li><p>effect çš„è¿”å›å€¼ä¹Ÿæ˜¯å¯é€‰çš„ï¼Œå¯çœç•¥ã€‚ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œç”¨æ¥æ‰§è¡Œäº‹ä»¶è§£ç»‘ç­‰æ¸…ç†æ“ä½œ</p></li><li><p>æ¸…ç†å‡½æ•°çš„æ‰§è¡Œæ—¶æœºï¼š</p><ul><li><p>1ã€ç©ºæ•°ç»„æ²¡æœ‰ä¾èµ–ã€‘ç»„ä»¶å¸è½½æ—¶</p><ul><li>æ­¤æ—¶ï¼Œç›¸å½“äº class ç»„ä»¶çš„ componentWillUnmount é’©å­å‡½æ•°çš„ä½œç”¨</li></ul></li></ul></li></ul><h3 id="useeffect-æŒ‚è½½å’Œå¸è½½æ¸…ç†ç»¼åˆå†™æ³•" tabindex="-1">useEffect æŒ‚è½½å’Œå¸è½½æ¸…ç†ç»¼åˆå†™æ³• <a class="header-anchor" href="#useeffect-æŒ‚è½½å’Œå¸è½½æ¸…ç†ç»¼åˆå†™æ³•" aria-hidden="true">#</a></h3><ul><li><p>æ¨èï¼šä¸€ä¸ª useEffect åªå¤„ç†ä¸€ä¸ªåŠŸèƒ½ï¼Œæœ‰å¤šä¸ªåŠŸèƒ½æ—¶ï¼Œä½¿ç”¨å¤šæ¬¡ useEffect</p></li><li><p>ä¼˜åŠ¿ï¼š</p><ul><li>æ ¹æ®ä¸šåŠ¡é€»è¾‘æ¥æ‹†åˆ†ï¼Œç›¸åŒåŠŸèƒ½çš„ä¸šåŠ¡é€»è¾‘æ”¾åœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯æ ¹æ®ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åç§°æ¥æ‹†åˆ†ä»£ç </li><li>ç¼–å†™ä»£ç æ—¶ï¼Œå…³æ³¨ç‚¹é›†ä¸­ï¼›è€Œä¸æ˜¯ä¸Šä¸‹ç¿»æ»šæ¥æŸ¥çœ‹ä»£ç </li></ul></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timerId</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ä¸€ç§’æ—¶é—´åˆ°ï¼Œçˆ†ç‚¸</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clearTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timerId</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [])</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æµè§ˆå™¨çª—å£è¢«è°ƒæ•´äº†</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">resize</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">resize</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="useeffect-å‘é€è¯·æ±‚" tabindex="-1">useEffect å‘é€è¯·æ±‚ <a class="header-anchor" href="#useeffect-å‘é€è¯·æ±‚" aria-hidden="true">#</a></h3><p>å‡†å¤‡å·¥ä½œï¼š</p><ol><li>å®‰è£…<code>axios</code>ã€‚</li><li>å‡†å¤‡<code>utils/request.js</code></li><li>å¯èƒ½éœ€è¦é‡å¯é¡¹ç›®ã€‚</li></ol><p>åœ¨ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ useEffect Hook å‘é€è¯·æ±‚è·å–æ•°æ®ï¼ˆside effectï¼‰ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// âœ…æ­£ç¡®å†™æ³•</span></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">loadData</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  	</span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">loadData</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒé”™è¯¯æ¼”ç¤ºï¼š</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¸è¦ç»™ useEffect ç¬¬ä¸€çº§å‡½æ•°æ·»åŠ  async</span></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> [])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è§£é‡Šï¼š</p><ul><li>æ³¨æ„ï¼š<strong>useEffect åªèƒ½æ˜¯ä¸€ä¸ªåŒæ­¥å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨ async</strong></li><li>å› ä¸º effect çš„è¿”å›å€¼åº”è¯¥æ˜¯ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼ŒReact ä¼šåœ¨ç»„ä»¶å¸è½½æˆ–è€… effect çš„ä¾èµ–é¡¹å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œ</li><li>ä½†å¦‚æœ effect æ˜¯ async çš„ï¼Œæ­¤æ—¶è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ã€‚è¿™æ ·çš„è¯ï¼Œå°±æ— æ³•ä¿è¯æ¸…ç†å‡½æ•°è¢«ç«‹å³è°ƒç”¨</li><li>å¦‚æœå»¶è¿Ÿè°ƒç”¨æ¸…ç†å‡½æ•°ï¼Œä¹Ÿå°±æ²¡æœ‰æœºä¼šå¿½ç•¥è¿‡æ—¶çš„è¯·æ±‚ç»“æœæˆ–å–æ¶ˆè¯·æ±‚</li><li><strong>ä¸ºäº†ä½¿ç”¨ async/await è¯­æ³•ï¼Œå¯ä»¥åœ¨ useEffect å†…éƒ¨æˆ–å¤–éƒ¨åˆ›å»º async å‡½æ•°ï¼Œå¹¶è°ƒç”¨</strong></li></ul><h2 id="useref" tabindex="-1">useRef <a class="header-anchor" href="#useref" aria-hidden="true">#</a></h2><blockquote><p>ä½œç”¨ï¼šè·å–domå…ƒç´ æˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡</p></blockquote><p>æ­¥éª¤ï¼š</p><ol><li>å¯¼å…¥useRefå‡½æ•°</li><li>è°ƒç”¨useRefå‡½æ•°ï¼Œåˆ›å»ºrefå¯¹è±¡</li><li>ç»‘å®šrefå¯¹è±¡åˆ°æ ‡ç­¾refå±æ€§ä¸Š</li><li>é€šè¿‡refå¯¹è±¡.currentå±æ€§ï¼Œè·å–domå…ƒç´ </li></ol><br><p>ä»£ç ï¼š</p><ol><li><p>å¯¼å…¥useRefå‡½æ•°</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">useRef</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>è°ƒç”¨useRefå‡½æ•°ï¼Œåˆ›å»ºrefå¯¹è±¡</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> iptRef </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useRef</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>ç»‘å®šrefå¯¹è±¡åˆ°æ ‡ç­¾refå±æ€§ä¸Š</p><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">ref</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">iptRef</span><span style="color:#89DDFF;">} /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>é€šè¿‡refå¯¹è±¡.currentå±æ€§ï¼Œè·å–domå…ƒç´ </p><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">iptRef</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">focus</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><br><p>å®Œæ•´ä»£ç :</p><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> React</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">App</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iptRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useRef</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleClick</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">iptRef</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">focus</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">ref</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">iptRef</span><span style="color:#89DDFF;">} /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">ç‚¹æˆ‘</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="useref-ä¿æŒå¼•ç”¨ä¸å˜" tabindex="-1">useRef-ä¿æŒå¼•ç”¨ä¸å˜ <a class="header-anchor" href="#useref-ä¿æŒå¼•ç”¨ä¸å˜" aria-hidden="true">#</a></h2><p>é™æ€ç»“æ„ï¼š</p><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> React</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useState</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">App</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timerId</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">setCount</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">99</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleClick</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">timerId</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setInterval</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å®šæ—¶å™¨åœ¨è·‘ğŸ’¥ğŸ’¥  -----&gt;  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">100</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleClose</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">clearInterval</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timerId</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">å…ˆç‚¹æˆ‘-å¼€å¯</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setCount</span><span style="color:#A6ACCD;">(count </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">å†ç‚¹æˆ‘++</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">handleClose</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">æœ€åç‚¹æˆ‘-å…³é—­</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">æœ€åæ‰“å¼€æ§åˆ¶å°è§‚å¯Ÿ</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>åŸå› ï¼š</p><ol><li>useStateä¼šå¯¼è‡´ç»„ä»¶åˆ·æ–°</li><li>ç»„ä»¶åˆ·æ–°ä¼šåˆ°è¿™timerIdè¢«é‡æ–°å£°æ˜ï¼ŒåŸæœ¬çš„timerIdå¼•ç”¨idä¸¢å¤±</li></ol><br><p>è§£å†³ï¼š</p><ol><li><code>useRef()</code>è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”ä¼šåœ¨ç»„ä»¶åˆ·æ–°æœŸé—´ï¼Œä¿æŒå¼•ç”¨åœ°å€ä¸å˜</li><li>ä½¿ç”¨refå¯¹è±¡.currentä¿å­˜currentId</li></ol><br><p>ä»£ç ï¼š</p><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> React</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useRef</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useState</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">App</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timerId</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useRef</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">setCount</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">99</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleClick</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">timerId</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setInterval</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å®šæ—¶å™¨åœ¨è·‘ğŸ’¥ğŸ’¥  -----&gt;  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">100</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleClose</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">clearInterval</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timerId</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">å…ˆç‚¹æˆ‘-å¼€å¯</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setCount</span><span style="color:#A6ACCD;">(count </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">å†ç‚¹æˆ‘++</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">handleClose</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">æœ€åç‚¹æˆ‘-å…³é—­</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">æœ€åæ‰“å¼€æ§åˆ¶å°è§‚å¯Ÿ</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div>`,100),e=[o];function t(c,r,F,y,D,i){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{A as __pageData,u as default};
